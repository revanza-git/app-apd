{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\projects\\\\app-apd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\projects\\\\app-apd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:\\\\projects\\\\app-apd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\projects\\\\app-apd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\projects\\\\app-apd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\projects\\\\app-apd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import FormOneInputs from\"../Forms/FormOneInputs\";import FormTwoInputs from\"../Forms/FormTwoInputs\";import ContinueBtn from\"../../Components/ContinueBtn\";import Alerts from\"../../Components/Alerts\";import Loader from\"react-loader-spinner\";import axios from\"axios\";import\"./index.css\";import qs from\"qs\";import{Card}from\"react-bootstrap\";var RegistrationPage=/*#__PURE__*/function(_Component){_inherits(RegistrationPage,_Component);var _super=_createSuper(RegistrationPage);function RegistrationPage(){_classCallCheck(this,RegistrationPage);return _super.apply(this,arguments);}_createClass(RegistrationPage,[{key:\"componentDidMount\",value:function componentDidMount(){var _this=this;var loadHandler=this.props.updatePageLoad;var updateFormType=this.props.updateFormType;var updateGender=this.props.updateGender;var updateRegType=this.props.updateRegType;var updateHandler=this.props.formOne;var updateRelationship=this.props.updateRelationship;//parsing URL\nvar query=qs.parse(this.props.location.search,{ignoreQueryPrefix:true});loadHandler(true);console.log(query.type);updateFormType(query.type);if(query.type===\"individu\"){updateRegType(\"R2007001\");}else if(query.type===\"pasangan\"){updateRegType(\"R2007002\");}else{updateRegType(\"R2007003\");}_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _this.getGender(updateGender,updateHandler);case 3:_context.next=5;return _this.getRelationship(updateRelationship,updateHandler);case 5:loadHandler(false);_context.next=13;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);updateHandler(\"form_status\",\"Koneksi bermasalah\");updateHandler(\"is_valid\",false);console.log(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}))();}},{key:\"getGender\",value:function(){var _getGender=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(updateGender,updateHandler){var url;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:url=process.env.REACT_APP_GENDER_URL;_context2.next=3;return axios.get(url,\"\").then(function(res){updateGender(res.data.data);}).catch(function(error){updateHandler(\"form_status\",\"Koneksi bermasalah\");updateHandler(\"is_valid\",false);console.log(error);});case 3:case\"end\":return _context2.stop();}}},_callee2);}));function getGender(_x,_x2){return _getGender.apply(this,arguments);}return getGender;}()},{key:\"getRelationship\",value:function(){var _getRelationship=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(updateRelationship,updateHandler){var url;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:url=process.env.REACT_APP_RELATIONSHIP_URL;_context3.next=3;return axios.get(url,\"\").then(function(res){console.log(res);updateRelationship(res.data.data);}).catch(function(error){updateHandler(\"form_status\",\"Koneksi bermasalah\");updateHandler(\"is_valid\",false);console.log(error);});case 3:case\"end\":return _context3.stop();}}},_callee3);}));function getRelationship(_x3,_x4){return _getRelationship.apply(this,arguments);}return getRelationship;}()},{key:\"render\",value:function render(){var _this$props=this.props,states=_this$props.states,formOne=_this$props.formOne,formTwo=_this$props.formTwo;var form_type=states.form_type;if(!states||form_type===\"\"||states.is_loading===true){return/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Card.Header,null,\"Loading\"),/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(Loader,{style:{width:\"100%\",height:\"100\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\"},type:\"ThreeDots\",color:\"#2BAD60\",height:\"100\",width:\"100\"})));}var card;if(form_type===\"pasangan\"){card=/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Card.Header,null,\"Pribadi\"),/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(FormOneInputs,{data:states,changeHandler:formOne}),/*#__PURE__*/React.createElement(Alerts,{data:states.form_1,valid:states.form_1.is_valid})),/*#__PURE__*/React.createElement(Card.Header,null,\"Pasangan\"),/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(FormTwoInputs,{data:states,changeHandler:formTwo}),/*#__PURE__*/React.createElement(Alerts,{data:states.form_2,valid:states.form_2.is_valid})),/*#__PURE__*/React.createElement(ContinueBtn,{data:this.props,targetURL:\"/confirmation\",valid:states.form_2.is_valid,label:\"Submit & Continue\"}));}else{card=/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Card.Header,null,\"Pribadi\"),/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(FormOneInputs,{data:states,changeHandler:formOne}),/*#__PURE__*/React.createElement(Alerts,{data:states.form_1,valid:states.form_1.is_valid})),/*#__PURE__*/React.createElement(ContinueBtn,{data:this.props,targetURL:\"/confirmation\",valid:this.props.states.form_1.is_valid,label:\"Submit & Continue\"}));}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Card.Header,null,\"Registrasi\"),/*#__PURE__*/React.createElement(Card.Body,null,card)));}}]);return RegistrationPage;}(Component);export default RegistrationPage;","map":{"version":3,"sources":["D:/projects/app-apd/src/Pages/Registration/index.js"],"names":["React","Component","FormOneInputs","FormTwoInputs","ContinueBtn","Alerts","Loader","axios","qs","Card","RegistrationPage","loadHandler","props","updatePageLoad","updateFormType","updateGender","updateRegType","updateHandler","formOne","updateRelationship","query","parse","location","search","ignoreQueryPrefix","console","log","type","getGender","getRelationship","url","process","env","REACT_APP_GENDER_URL","get","then","res","data","catch","error","REACT_APP_RELATIONSHIP_URL","states","formTwo","form_type","is_loading","width","height","display","justifyContent","alignItems","card","form_1","is_valid","form_2"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport FormOneInputs from \"../Forms/FormOneInputs\";\r\nimport FormTwoInputs from \"../Forms/FormTwoInputs\";\r\nimport ContinueBtn from \"../../Components/ContinueBtn\";\r\nimport Alerts from \"../../Components/Alerts\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport axios from \"axios\";\r\n\r\nimport \"./index.css\";\r\nimport qs from \"qs\";\r\n\r\nimport { Card } from \"react-bootstrap\";\r\n\r\nclass RegistrationPage extends Component {\r\n  componentDidMount() {\r\n    const loadHandler = this.props.updatePageLoad;\r\n    const updateFormType = this.props.updateFormType;\r\n    const updateGender = this.props.updateGender;\r\n    const updateRegType = this.props.updateRegType;\r\n    const updateHandler = this.props.formOne;\r\n    const updateRelationship = this.props.updateRelationship;\r\n\r\n    //parsing URL\r\n    const query = qs.parse(this.props.location.search, {\r\n      ignoreQueryPrefix: true,\r\n    });\r\n\r\n    loadHandler(true);\r\n    console.log(query.type);\r\n    updateFormType(query.type);\r\n\r\n    if (query.type === \"individu\") {\r\n      updateRegType(\"R2007001\");\r\n    } else if (query.type === \"pasangan\") {\r\n      updateRegType(\"R2007002\");\r\n    } else {\r\n      updateRegType(\"R2007003\");\r\n    }\r\n\r\n    (async () => {\r\n      try {\r\n        await this.getGender(updateGender, updateHandler);\r\n        await this.getRelationship(updateRelationship, updateHandler);\r\n        loadHandler(false);\r\n      } catch (err) {\r\n        updateHandler(\"form_status\", \"Koneksi bermasalah\");\r\n        updateHandler(\"is_valid\", false);\r\n        console.log(err);\r\n      }\r\n    })();\r\n  }\r\n\r\n  async getGender(updateGender, updateHandler) {\r\n    const url = process.env.REACT_APP_GENDER_URL;\r\n\r\n    await axios\r\n      .get(url, \"\")\r\n      .then((res) => {\r\n        updateGender(res.data.data);\r\n      })\r\n      .catch(function (error) {\r\n        updateHandler(\"form_status\", \"Koneksi bermasalah\");\r\n        updateHandler(\"is_valid\", false);\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  async getRelationship(updateRelationship, updateHandler) {\r\n    const url = process.env.REACT_APP_RELATIONSHIP_URL;\r\n\r\n    await axios\r\n      .get(url, \"\")\r\n      .then((res) => {\r\n        console.log(res);\r\n        updateRelationship(res.data.data);\r\n      })\r\n      .catch(function (error) {\r\n        updateHandler(\"form_status\", \"Koneksi bermasalah\");\r\n        updateHandler(\"is_valid\", false);\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const { states, formOne, formTwo } = this.props;\r\n    const form_type = states.form_type;\r\n\r\n    if (!states || form_type === \"\" || states.is_loading === true) {\r\n      return (\r\n        <Card>\r\n          <Card.Header>Loading</Card.Header>\r\n          <Card.Body>\r\n            <Loader\r\n              style={{\r\n                width: \"100%\",\r\n                height: \"100\",\r\n                display: \"flex\",\r\n                justifyContent: \"center\",\r\n                alignItems: \"center\",\r\n              }}\r\n              type=\"ThreeDots\"\r\n              color=\"#2BAD60\"\r\n              height=\"100\"\r\n              width=\"100\"\r\n            />\r\n          </Card.Body>\r\n        </Card>\r\n      );\r\n    }\r\n\r\n    let card;\r\n    if (form_type === \"pasangan\") {\r\n      card = (\r\n        <Card>\r\n          <Card.Header>Pribadi</Card.Header>\r\n          <Card.Body>\r\n            <FormOneInputs data={states} changeHandler={formOne} />\r\n            <Alerts data={states.form_1} valid={states.form_1.is_valid} />\r\n          </Card.Body>\r\n\r\n          <Card.Header>Pasangan</Card.Header>\r\n          <Card.Body>\r\n            <FormTwoInputs data={states} changeHandler={formTwo} />\r\n            <Alerts data={states.form_2} valid={states.form_2.is_valid} />\r\n          </Card.Body>\r\n          <ContinueBtn\r\n            data={this.props}\r\n            targetURL=\"/confirmation\"\r\n            valid={states.form_2.is_valid}\r\n            label=\"Submit & Continue\"\r\n          />\r\n        </Card>\r\n      );\r\n    } else {\r\n      card = (\r\n        <Card>\r\n          <Card.Header>Pribadi</Card.Header>\r\n          <Card.Body>\r\n            <FormOneInputs data={states} changeHandler={formOne} />\r\n            <Alerts data={states.form_1} valid={states.form_1.is_valid} />\r\n          </Card.Body>\r\n          <ContinueBtn\r\n            data={this.props}\r\n            targetURL=\"/confirmation\"\r\n            valid={this.props.states.form_1.is_valid}\r\n            label=\"Submit & Continue\"\r\n          />\r\n        </Card>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <Card>\r\n          <Card.Header>Registrasi</Card.Header>\r\n          <Card.Body>{card}</Card.Body>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RegistrationPage;\r\n"]},"metadata":{},"sourceType":"module"}