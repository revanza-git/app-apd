{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\projects\\\\app-apd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\projects\\\\app-apd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:\\\\projects\\\\app-apd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\projects\\\\app-apd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\projects\\\\app-apd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\projects\\\\app-apd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Loader from\"react-loader-spinner\";import{Card}from\"react-bootstrap\";var PaymentPage=/*#__PURE__*/function(_Component){_inherits(PaymentPage,_Component);var _super=_createSuper(PaymentPage);function PaymentPage(props){var _this;_classCallCheck(this,PaymentPage);_this=_super.call(this,props);_this.state={redirect_url:null,token:null,order_id:0};return _this;}_createClass(PaymentPage,[{key:\"componentDidMount\",value:function componentDidMount(){this.process(this.props.states);}// randomizer(length) {\n//   var result = \"\";\n//   var characters =\n//     \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n//   var charactersLength = characters.length;\n//   for (var i = 0; i < length; i++) {\n//     result += characters.charAt(Math.floor(Math.random() * charactersLength));\n//   }\n//   return result;\n// }\n},{key:\"process\",value:function(_process){function process(_x){return _process.apply(this,arguments);}process.toString=function(){return _process.toString();};return process;}(function(param){var _this2=this;var formOne=param.form_1;var account=param.midtrans_account;var dataPayment=param.simedis_payment;var url=account.api_url;var data={transaction_details:{order_id:dataPayment.bill_code,gross_amount:dataPayment.bill_amount},customer_details:{first_name:formOne.first_name,last_name:formOne.last_name,email:formOne.email,phone:formOne.phone_number},enabled_payments:account.enabled_payments,gopay:{enable_callback:true,callback_url:process.env.REACT_APP_CALLBACK_FINISH_URL}};console.log(data);var config={auth:{username:account.server_key,password:\"\"},headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\",Authorization:account.server_key+\":\"}};_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _this2.props.postApi(url,data,config);case 3:response=_context.sent;_this2.setState({redirect_url:response.data.redirect_url,token:response.data.token});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}))();})},{key:\"render\",value:function render(){if(this.state.redirect_url!==null){window.location.assign(this.state.redirect_url);// window.snap.pay(this.state.token);\n}return/*#__PURE__*/React.createElement(\"div\",null,console.log(\"render halaman\"),/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Card.Header,null,\"PAYMENT\"),/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Card.Header,null,\"Redirecting to Midtrans\"),/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(Loader,{style:{width:\"100%\",height:\"100\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\"},type:\"ThreeDots\",color:\"#2BAD60\",height:\"100\",width:\"100\"}))))));}}]);return PaymentPage;}(Component);export default PaymentPage;","map":{"version":3,"sources":["D:/projects/app-apd/src/Pages/Payment/index.js"],"names":["React","Component","Loader","Card","PaymentPage","props","state","redirect_url","token","order_id","process","states","param","formOne","form_1","account","midtrans_account","dataPayment","simedis_payment","url","api_url","data","transaction_details","bill_code","gross_amount","bill_amount","customer_details","first_name","last_name","email","phone","phone_number","enabled_payments","gopay","enable_callback","callback_url","env","REACT_APP_CALLBACK_FINISH_URL","console","log","config","auth","username","server_key","password","headers","Accept","Authorization","postApi","response","setState","window","location","assign","width","height","display","justifyContent","alignItems"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Loader from \"react-loader-spinner\";\r\n\r\nimport { Card } from \"react-bootstrap\";\r\n\r\nclass PaymentPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { redirect_url: null, token: null, order_id: 0 };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.process(this.props.states);\r\n  }\r\n\r\n  // randomizer(length) {\r\n  //   var result = \"\";\r\n  //   var characters =\r\n  //     \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n  //   var charactersLength = characters.length;\r\n  //   for (var i = 0; i < length; i++) {\r\n  //     result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n  //   }\r\n  //   return result;\r\n  // }\r\n\r\n  process(param) {\r\n    const formOne = param.form_1;\r\n    const account = param.midtrans_account;\r\n    const dataPayment = param.simedis_payment;\r\n\r\n    const url = account.api_url;\r\n    const data = {\r\n      transaction_details: {\r\n        order_id: dataPayment.bill_code,\r\n        gross_amount: dataPayment.bill_amount,\r\n      },\r\n      customer_details: {\r\n        first_name: formOne.first_name,\r\n        last_name: formOne.last_name,\r\n        email: formOne.email,\r\n        phone: formOne.phone_number,\r\n      },\r\n      enabled_payments: account.enabled_payments,\r\n      gopay: {\r\n        enable_callback: true,\r\n        callback_url: process.env.REACT_APP_CALLBACK_FINISH_URL,\r\n      },\r\n    };\r\n\r\n    console.log(data);\r\n\r\n    const config = {\r\n      auth: {\r\n        username: account.server_key,\r\n        password: \"\",\r\n      },\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: account.server_key + \":\",\r\n      },\r\n    };\r\n\r\n    (async () => {\r\n      try {\r\n        const response = await this.props.postApi(url, data, config);\r\n        this.setState({\r\n          redirect_url: response.data.redirect_url,\r\n          token: response.data.token,\r\n        });\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    })();\r\n  }\r\n\r\n  render() {\r\n    if (this.state.redirect_url !== null) {\r\n      window.location.assign(this.state.redirect_url);\r\n      // window.snap.pay(this.state.token);\r\n    }\r\n    return (\r\n      <div>\r\n        {console.log(\"render halaman\")}\r\n        <Card>\r\n          <Card.Header>PAYMENT</Card.Header>\r\n          <Card.Body>\r\n            <Card>\r\n              <Card.Header>Redirecting to Midtrans</Card.Header>\r\n              <Card.Body>\r\n                <Loader\r\n                  style={{\r\n                    width: \"100%\",\r\n                    height: \"100\",\r\n                    display: \"flex\",\r\n                    justifyContent: \"center\",\r\n                    alignItems: \"center\",\r\n                  }}\r\n                  type=\"ThreeDots\"\r\n                  color=\"#2BAD60\"\r\n                  height=\"100\"\r\n                  width=\"100\"\r\n                />\r\n              </Card.Body>\r\n            </Card>\r\n          </Card.Body>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PaymentPage;\r\n"]},"metadata":{},"sourceType":"module"}