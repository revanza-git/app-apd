{"ast":null,"code":"import _classCallCheck from\"D:\\\\projects\\\\app-apd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\projects\\\\app-apd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\projects\\\\app-apd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\projects\\\\app-apd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import ActivationInputs from\"../Forms/ActivationInputs\";import ContinueBtn from\"../../Components/ContinueBtn\";import Loader from\"../../Components/Loader\";import ActivationSuccess from\"../../Components/ActivationSuccess\";import axios from\"axios\";import\"./index.scss\";import qs from\"qs\";import{Card,Container,Row,Col}from\"react-bootstrap\";var ActivationPage=/*#__PURE__*/function(_Component){_inherits(ActivationPage,_Component);var _super=_createSuper(ActivationPage);function ActivationPage(){var _this;_classCallCheck(this,ActivationPage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.validation=function(param){var simedisAccount=_this.props.states.simedis_account;var updateFormStatus=_this.props.simedisAccountChange;if(simedisAccount.username===\"\"||simedisAccount.password===\"\"||simedisAccount.password_retype===\"\"){updateFormStatus(\"form_status\",\"Form harus diisi semua\");return false;}else{updateFormStatus(\"form_status\",\"ok\");return true;}};return _this;}_createClass(ActivationPage,[{key:\"componentDidMount\",value:function componentDidMount(){var loadHandler=this.props.updatePageLoad;var changeHandler=this.props.simedisAccountChange;//parsing URL\nvar query=qs.parse(this.props.location.search,{ignoreQueryPrefix:true});// loadHandler(true);\nvar url=process.env.REACT_APP_USER_VALIDATE_KEY_URL;var data={uniqueActivationKey:query.token};axios.post(url,data,\"\").then(function(i){console.log(i);var res=i.data.data;console.log(res.registrationCode);var resCustomer=res.customer;changeHandler(\"customer_code\",resCustomer.customerCode);changeHandler(\"customer_name\",resCustomer.customerName);changeHandler(\"customer_status\",resCustomer.customerStatus);changeHandler(\"username\",resCustomer.emailAddress);changeHandler(\"registration_code\",res.registrationCode);loadHandler(false);}).catch(function(error){changeHandler(\"form_status\",\"Mohon maaf koneksi mengalami kendala, silahkan coba lagi\");console.log(error);changeHandler(\"is_valid\",false);loadHandler(false);});}},{key:\"render\",value:function render(){var _this$props=this.props,states=_this$props.states,simedisAccountChange=_this$props.simedisAccountChange;console.log(this.props);var card;if(!states||states.is_loading===true){card=/*#__PURE__*/React.createElement(Loader,null);}else if(states.simedis_account.active===true){card=/*#__PURE__*/React.createElement(ActivationSuccess,{handler:simedisAccountChange});}else{card=/*#__PURE__*/React.createElement(Card,{className:\"activation-card\"},/*#__PURE__*/React.createElement(\"span\",{className:\"activation-tagline\"},\"Buat kata sandi untuk akses layanan\",\" \",/*#__PURE__*/React.createElement(\"span\",{className:\"activation-bold-simedis\"},\"Simedis\")),/*#__PURE__*/React.createElement(ActivationInputs,{data:states,changeHandler:simedisAccountChange,validation:this.validation}),/*#__PURE__*/React.createElement(ContinueBtn,{data:this.props,targetURL:\"/activation\",valid:states.simedis_account.is_valid,label:\"Aktivasi\"}));}return/*#__PURE__*/React.createElement(\"div\",{className:\"main-activation\"},/*#__PURE__*/React.createElement(Container,{className:\"activation-container-0\",fluid:true},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,card))));}}]);return ActivationPage;}(Component);export default ActivationPage;","map":{"version":3,"sources":["D:/projects/app-apd/src/Pages/Activation/index.js"],"names":["React","Component","ActivationInputs","ContinueBtn","Loader","ActivationSuccess","axios","qs","Card","Container","Row","Col","ActivationPage","validation","param","simedisAccount","props","states","simedis_account","updateFormStatus","simedisAccountChange","username","password","password_retype","loadHandler","updatePageLoad","changeHandler","query","parse","location","search","ignoreQueryPrefix","url","process","env","REACT_APP_USER_VALIDATE_KEY_URL","data","uniqueActivationKey","token","post","then","i","console","log","res","registrationCode","resCustomer","customer","customerCode","customerName","customerStatus","emailAddress","catch","error","card","is_loading","active","is_valid"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport ActivationInputs from \"../Forms/ActivationInputs\";\r\nimport ContinueBtn from \"../../Components/ContinueBtn\";\r\nimport Loader from \"../../Components/Loader\";\r\nimport ActivationSuccess from \"../../Components/ActivationSuccess\";\r\nimport axios from \"axios\";\r\n\r\nimport \"./index.scss\";\r\nimport qs from \"qs\";\r\n\r\nimport { Card, Container, Row, Col } from \"react-bootstrap\";\r\n\r\nclass ActivationPage extends Component {\r\n  componentDidMount() {\r\n    const loadHandler = this.props.updatePageLoad;\r\n    const changeHandler = this.props.simedisAccountChange;\r\n\r\n    //parsing URL\r\n    const query = qs.parse(this.props.location.search, {\r\n      ignoreQueryPrefix: true,\r\n    });\r\n\r\n    // loadHandler(true);\r\n    const url = process.env.REACT_APP_USER_VALIDATE_KEY_URL;\r\n    const data = {\r\n      uniqueActivationKey: query.token,\r\n    };\r\n\r\n    axios\r\n      .post(url, data, \"\")\r\n      .then((i) => {\r\n        console.log(i);\r\n        const res = i.data.data;\r\n        console.log(res.registrationCode);\r\n        const resCustomer = res.customer;\r\n\r\n        changeHandler(\"customer_code\", resCustomer.customerCode);\r\n        changeHandler(\"customer_name\", resCustomer.customerName);\r\n        changeHandler(\"customer_status\", resCustomer.customerStatus);\r\n        changeHandler(\"username\", resCustomer.emailAddress);\r\n        changeHandler(\"registration_code\", res.registrationCode);\r\n\r\n        loadHandler(false);\r\n      })\r\n      .catch(function (error) {\r\n        changeHandler(\r\n          \"form_status\",\r\n          \"Mohon maaf koneksi mengalami kendala, silahkan coba lagi\"\r\n        );\r\n        console.log(error);\r\n        changeHandler(\"is_valid\", false);\r\n        loadHandler(false);\r\n      });\r\n  }\r\n\r\n  validation = (param) => {\r\n    const simedisAccount = this.props.states.simedis_account;\r\n    const updateFormStatus = this.props.simedisAccountChange;\r\n\r\n    if (\r\n      simedisAccount.username === \"\" ||\r\n      simedisAccount.password === \"\" ||\r\n      simedisAccount.password_retype === \"\"\r\n    ) {\r\n      updateFormStatus(\"form_status\", \"Form harus diisi semua\");\r\n      return false;\r\n    } else {\r\n      updateFormStatus(\"form_status\", \"ok\");\r\n      return true;\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { states, simedisAccountChange } = this.props;\r\n    console.log(this.props);\r\n\r\n    let card;\r\n\r\n    if (!states || states.is_loading === true) {\r\n      card = <Loader />;\r\n    } else if (states.simedis_account.active === true) {\r\n      card = <ActivationSuccess handler={simedisAccountChange} />;\r\n    } else {\r\n      card = (\r\n        <Card className=\"activation-card\">\r\n          <span className=\"activation-tagline\">\r\n            Buat kata sandi untuk akses layanan{\" \"}\r\n            <span className=\"activation-bold-simedis\">Simedis</span>\r\n          </span>\r\n          <ActivationInputs\r\n            data={states}\r\n            changeHandler={simedisAccountChange}\r\n            validation={this.validation}\r\n          />\r\n          <ContinueBtn\r\n            data={this.props}\r\n            targetURL=\"/activation\"\r\n            valid={states.simedis_account.is_valid}\r\n            label=\"Aktivasi\"\r\n          />\r\n        </Card>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"main-activation\">\r\n        <Container className=\"activation-container-0\" fluid>\r\n          <Row>\r\n            <Col>{card}</Col>\r\n          </Row>\r\n        </Container>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ActivationPage;\r\n"]},"metadata":{},"sourceType":"module"}