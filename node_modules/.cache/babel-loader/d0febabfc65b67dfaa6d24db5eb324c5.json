{"ast":null,"code":"import React from\"react\";import{Button,Form,Col,Row}from\"react-bootstrap\";import{useHistory}from\"react-router-dom\";import axios from\"axios\";import\"./index.scss\";var ConBtn=function ConBtn(_ref){var data=_ref.data,targetURL=_ref.targetURL,valid=_ref.valid,label=_ref.label;//depended need fix for dynamic form\nvar dataFormOne=data.states.form_1;var personalChange=data.formOne;var history=useHistory();var loadHandler=data.updatePageLoad;var states=data.states;var updateData=data.simedisPaymentChange;var accountFormData=data.states.simedis_account;var updateFormAccountChange=data.simedisAccountChange;var GenerateData=function GenerateData(){if(data.states.form_type===\"individu\"){var _data={registrationTypeCode:states.reg_type,appCode:states.app_code,usedReferralCode:\"\",customers:[{customerName:dataFormOne.full_name,ktpNO:dataFormOne.identification_number,dateOfBirth:dataFormOne.birth_date,emailAddress:dataFormOne.email,genderCode:dataFormOne.gender,occupation:dataFormOne.occupation,phoneNo:dataFormOne.phone_number,customerStatus:dataFormOne.relation_code}]};return _data;}else{var _data2={registrationTypeCode:states.reg_type,appCode:states.app_code,usedReferralCode:\"\",customers:[{customerName:dataFormOne.full_name,ktpNO:dataFormOne.identification_number,dateOfBirth:dataFormOne.birth_date,emailAddress:dataFormOne.email,genderCode:dataFormOne.gender,occupation:dataFormOne.occupation,phoneNo:dataFormOne.phone_number,customerStatus:dataFormOne.relation_code}]};return _data2;}};var handleClick=function handleClick(){if(targetURL===\"/confirmation\"){loadHandler(true);var url=process.env.REACT_APP_USER_REGISTER_URL;var _data3=GenerateData();axios.post(url,_data3,\"\").then(function(response){var res=response.data.data;updateData(\"bill_amount\",res.billAmount);updateData(\"bill_code\",res.billCode);updateData(\"registration_code\",res.registrationCode);history.push(targetURL);}).catch(function(error){console.log(error);var errMessage=error.response.data.message;personalChange(\"form_status\",errMessage);personalChange(\"is_valid\",false);loadHandler(false);});}else if(targetURL===\"/activation\"){if(accountFormData.password!==accountFormData.password_retype){updateFormAccountChange(\"form_status\",\"Kata sandi belum sesuai, silahkan ulang kembali.\");updateFormAccountChange(\"is_valid\",false);}else{var _url=process.env.REACT_APP_USER_ACTIVATE_URL;var _data4={registrationCode:accountFormData.registration_code,username:accountFormData.username,password:accountFormData.password};loadHandler(true);axios.post(_url,_data4,\"\").then(function(res){updateFormAccountChange(\"active\",true);updateFormAccountChange(\"form_status\",\"ok\");loadHandler(false);history.push(\"/activation\");}).catch(function(error){updateFormAccountChange(\"form_status\",\"Mohon maaf koneksi mengalami kendala, silahkan coba lagi\");updateFormAccountChange(\"is_valid\",false);loadHandler(false);});}}else if(targetURL===\"/dashboard\"){loadHandler(true);var _url2=process.env.REACT_APP_LOGIN_URL;var _data5={username:accountFormData.username,password:accountFormData.password};axios.post(_url2,_data5,\"\").then(function(res){var token=res.data.token;var userData=res.data.data.user;updateFormAccountChange(\"username\",userData.username);updateFormAccountChange(\"token\",token);history.push(targetURL+\"?id=\"+userData.id);}).catch(function(error){var resMessage=error.response.data.data.message;var errMessage;if(resMessage===\"username or password are invalid\"){errMessage=\"Email atau password tidak valid\";}else{errMessage=resMessage;}updateFormAccountChange(\"form_status\",errMessage);updateFormAccountChange(\"is_valid\",false);loadHandler(false);});}else if(targetURL===\"/payment\"){history.push(targetURL);}else{console.log(\"Halaman Belum Terdaftar\");}};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Form.Group,{as:Row},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Button,{className:\"btn-continue\",onClick:function onClick(){return handleClick();},type:\"submit\"},/*#__PURE__*/React.createElement(\"span\",{className:\"btn-tagline\"},label)))));};export default ConBtn;","map":{"version":3,"sources":["D:/projects/app-apd/src/Components/ContinueBtn/index.js"],"names":["React","Button","Form","Col","Row","useHistory","axios","ConBtn","data","targetURL","valid","label","dataFormOne","states","form_1","personalChange","formOne","history","loadHandler","updatePageLoad","updateData","simedisPaymentChange","accountFormData","simedis_account","updateFormAccountChange","simedisAccountChange","GenerateData","form_type","registrationTypeCode","reg_type","appCode","app_code","usedReferralCode","customers","customerName","full_name","ktpNO","identification_number","dateOfBirth","birth_date","emailAddress","email","genderCode","gender","occupation","phoneNo","phone_number","customerStatus","relation_code","handleClick","url","process","env","REACT_APP_USER_REGISTER_URL","post","then","response","res","billAmount","billCode","registrationCode","push","catch","error","console","log","errMessage","message","password","password_retype","REACT_APP_USER_ACTIVATE_URL","registration_code","username","REACT_APP_LOGIN_URL","token","userData","user","id","resMessage"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Button, Form, Col, Row } from \"react-bootstrap\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport \"./index.scss\";\r\n\r\nconst ConBtn = ({ data, targetURL, valid, label }) => {\r\n  //depended need fix for dynamic form\r\n  const dataFormOne = data.states.form_1;\r\n  const personalChange = data.formOne;\r\n\r\n  const history = useHistory();\r\n\r\n  const loadHandler = data.updatePageLoad;\r\n  const states = data.states;\r\n  const updateData = data.simedisPaymentChange;\r\n  const accountFormData = data.states.simedis_account;\r\n  const updateFormAccountChange = data.simedisAccountChange;\r\n\r\n  const GenerateData = () => {\r\n    if (data.states.form_type === \"individu\") {\r\n      const data = {\r\n        registrationTypeCode: states.reg_type,\r\n        appCode: states.app_code,\r\n        usedReferralCode: \"\",\r\n        customers: [\r\n          {\r\n            customerName: dataFormOne.full_name,\r\n            ktpNO: dataFormOne.identification_number,\r\n            dateOfBirth: dataFormOne.birth_date,\r\n            emailAddress: dataFormOne.email,\r\n            genderCode: dataFormOne.gender,\r\n            occupation: dataFormOne.occupation,\r\n            phoneNo: dataFormOne.phone_number,\r\n            customerStatus: dataFormOne.relation_code,\r\n          },\r\n        ],\r\n      };\r\n\r\n      return data;\r\n    } else {\r\n      const data = {\r\n        registrationTypeCode: states.reg_type,\r\n        appCode: states.app_code,\r\n        usedReferralCode: \"\",\r\n        customers: [\r\n          {\r\n            customerName: dataFormOne.full_name,\r\n            ktpNO: dataFormOne.identification_number,\r\n            dateOfBirth: dataFormOne.birth_date,\r\n            emailAddress: dataFormOne.email,\r\n            genderCode: dataFormOne.gender,\r\n            occupation: dataFormOne.occupation,\r\n            phoneNo: dataFormOne.phone_number,\r\n            customerStatus: dataFormOne.relation_code,\r\n          },\r\n        ],\r\n      };\r\n\r\n      return data;\r\n    }\r\n  };\r\n\r\n  const handleClick = () => {\r\n    if (targetURL === \"/confirmation\") {\r\n      loadHandler(true);\r\n      const url = process.env.REACT_APP_USER_REGISTER_URL;\r\n      const data = GenerateData();\r\n\r\n      axios\r\n        .post(url, data, \"\")\r\n        .then((response) => {\r\n          const res = response.data.data;\r\n\r\n          updateData(\"bill_amount\", res.billAmount);\r\n          updateData(\"bill_code\", res.billCode);\r\n          updateData(\"registration_code\", res.registrationCode);\r\n\r\n          history.push(targetURL);\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n          const errMessage = error.response.data.message;\r\n          personalChange(\"form_status\", errMessage);\r\n          personalChange(\"is_valid\", false);\r\n          loadHandler(false);\r\n        });\r\n    } else if (targetURL === \"/activation\") {\r\n      if (accountFormData.password !== accountFormData.password_retype) {\r\n        updateFormAccountChange(\r\n          \"form_status\",\r\n          \"Kata sandi belum sesuai, silahkan ulang kembali.\"\r\n        );\r\n        updateFormAccountChange(\"is_valid\", false);\r\n      } else {\r\n        const url = process.env.REACT_APP_USER_ACTIVATE_URL;\r\n        const data = {\r\n          registrationCode: accountFormData.registration_code,\r\n          username: accountFormData.username,\r\n          password: accountFormData.password,\r\n        };\r\n\r\n        loadHandler(true);\r\n        axios\r\n          .post(url, data, \"\")\r\n          .then((res) => {\r\n            updateFormAccountChange(\"active\", true);\r\n            updateFormAccountChange(\"form_status\", \"ok\");\r\n\r\n            loadHandler(false);\r\n            history.push(\"/activation\");\r\n          })\r\n          .catch(function (error) {\r\n            updateFormAccountChange(\r\n              \"form_status\",\r\n              \"Mohon maaf koneksi mengalami kendala, silahkan coba lagi\"\r\n            );\r\n            updateFormAccountChange(\"is_valid\", false);\r\n\r\n            loadHandler(false);\r\n          });\r\n      }\r\n    } else if (targetURL === \"/dashboard\") {\r\n      loadHandler(true);\r\n      const url = process.env.REACT_APP_LOGIN_URL;\r\n      const data = {\r\n        username: accountFormData.username,\r\n        password: accountFormData.password,\r\n      };\r\n\r\n      axios\r\n        .post(url, data, \"\")\r\n        .then((res) => {\r\n          const token = res.data.token;\r\n          const userData = res.data.data.user;\r\n\r\n          updateFormAccountChange(\"username\", userData.username);\r\n          updateFormAccountChange(\"token\", token);\r\n          history.push(targetURL + \"?id=\" + userData.id);\r\n        })\r\n        .catch(function (error) {\r\n          const resMessage = error.response.data.data.message;\r\n          let errMessage;\r\n\r\n          if (resMessage === \"username or password are invalid\") {\r\n            errMessage = \"Email atau password tidak valid\";\r\n          } else {\r\n            errMessage = resMessage;\r\n          }\r\n\r\n          updateFormAccountChange(\"form_status\", errMessage);\r\n          updateFormAccountChange(\"is_valid\", false);\r\n\r\n          loadHandler(false);\r\n        });\r\n    } else if (targetURL === \"/payment\") {\r\n      history.push(targetURL);\r\n    } else {\r\n      console.log(\"Halaman Belum Terdaftar\");\r\n    }\r\n  };\r\n  return (\r\n    <div>\r\n      <Form.Group as={Row}>\r\n        <Col>\r\n          <Button\r\n            className=\"btn-continue\"\r\n            onClick={() => handleClick()}\r\n            type=\"submit\"\r\n          >\r\n            <span className=\"btn-tagline\">{label}</span>\r\n          </Button>\r\n        </Col>\r\n      </Form.Group>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ConBtn;\r\n"]},"metadata":{},"sourceType":"module"}