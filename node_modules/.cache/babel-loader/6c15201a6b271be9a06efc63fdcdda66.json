{"ast":null,"code":"var _jsxFileName = \"D:\\\\project\\\\app-apd\\\\src\\\\Pages\\\\Activation\\\\index.js\";\nimport React, { Component } from \"react\";\nimport ActivationInputs from \"../Forms/ActivationInputs\";\nimport ContinueBtn from \"../../Components/ContinueBtn\";\nimport Loader from \"../../Components/Loader\";\nimport ActivationSuccess from \"../../Components/ActivationSuccess\";\nimport axios from \"axios\";\nimport \"./index.scss\";\nimport qs from \"qs\";\nimport { Card, Container, Row, Col } from \"react-bootstrap\";\n\nclass ActivationPage extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.validation = param => {\n      const simedisAccount = this.props.states.simedis_account;\n      const updateFormStatus = this.props.simedisAccountChange;\n\n      if (simedisAccount.username === \"\" || simedisAccount.password === \"\" || simedisAccount.password_retype === \"\") {\n        updateFormStatus(\"form_status\", \"Form harus diisi semua\");\n        return false;\n      } else {\n        updateFormStatus(\"form_status\", \"ok\");\n        return true;\n      }\n    };\n  }\n\n  componentDidMount() {\n    const loadHandler = this.props.updatePageLoad;\n    const changeHandler = this.props.simedisAccountChange; //parsing URL\n\n    const query = qs.parse(this.props.location.search, {\n      ignoreQueryPrefix: true\n    });\n    loadHandler(true);\n    const url = \"https://cors-anywhere.herokuapp.com/https://sit-eli.myequity.id/customers/validateKey\";\n    const data = {\n      uniqueActivationKey: query.token\n    };\n    axios.post(url, data, \"\").then(i => {\n      console.log(i);\n      const res = i.data.data;\n      console.log(res.registrationCode);\n      const resCustomer = res.customer;\n      changeHandler(\"customer_code\", resCustomer.customerCode);\n      changeHandler(\"customer_name\", resCustomer.customerName);\n      changeHandler(\"customer_status\", resCustomer.customerStatus);\n      changeHandler(\"username\", resCustomer.emailAddress);\n      changeHandler(\"registration_code\", res.registrationCode);\n      loadHandler(false);\n    }).catch(function (error) {\n      changeHandler(\"form_status\", \"Mohon maaf koneksi mengalami kendala, silahkan coba lagi\");\n      console.log(error);\n      changeHandler(\"is_valid\", false);\n      loadHandler(false);\n    });\n  }\n\n  render() {\n    const {\n      states,\n      simedisAccountChange\n    } = this.props;\n    console.log(this.props);\n    let card;\n\n    if (!states || states.is_loading === true) {\n      card = /*#__PURE__*/React.createElement(Loader, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 14\n        }\n      });\n    } else if (states.simedis_account.active === true) {\n      card = /*#__PURE__*/React.createElement(ActivationSuccess, {\n        handler: simedisAccountChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 14\n        }\n      });\n    } else {\n      card = /*#__PURE__*/React.createElement(Card, {\n        className: \"activation-card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"activation-tagline\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }\n      }, \"Buat kata sandi untuk akses layanan\", \" \", /*#__PURE__*/React.createElement(\"span\", {\n        className: \"activation-bold-simedis\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }\n      }, \"Simedis\")), /*#__PURE__*/React.createElement(ActivationInputs, {\n        data: states,\n        changeHandler: simedisAccountChange,\n        validation: this.validation,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(ContinueBtn, {\n        data: this.props,\n        targetURL: \"/activation\",\n        valid: states.simedis_account.is_valid,\n        label: \"Aktivasi\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }\n      }));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main-activation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Container, {\n      className: \"activation-container-0\",\n      fluid: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }\n    }, card))));\n  }\n\n}\n\nexport default ActivationPage;","map":{"version":3,"sources":["D:/project/app-apd/src/Pages/Activation/index.js"],"names":["React","Component","ActivationInputs","ContinueBtn","Loader","ActivationSuccess","axios","qs","Card","Container","Row","Col","ActivationPage","validation","param","simedisAccount","props","states","simedis_account","updateFormStatus","simedisAccountChange","username","password","password_retype","componentDidMount","loadHandler","updatePageLoad","changeHandler","query","parse","location","search","ignoreQueryPrefix","url","data","uniqueActivationKey","token","post","then","i","console","log","res","registrationCode","resCustomer","customer","customerCode","customerName","customerStatus","emailAddress","catch","error","render","card","is_loading","active","is_valid"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport ActivationInputs from \"../Forms/ActivationInputs\";\r\nimport ContinueBtn from \"../../Components/ContinueBtn\";\r\nimport Loader from \"../../Components/Loader\";\r\nimport ActivationSuccess from \"../../Components/ActivationSuccess\";\r\nimport axios from \"axios\";\r\n\r\nimport \"./index.scss\";\r\nimport qs from \"qs\";\r\n\r\nimport { Card, Container, Row, Col } from \"react-bootstrap\";\r\n\r\nclass ActivationPage extends Component {\r\n  componentDidMount() {\r\n    const loadHandler = this.props.updatePageLoad;\r\n    const changeHandler = this.props.simedisAccountChange;\r\n\r\n    //parsing URL\r\n    const query = qs.parse(this.props.location.search, {\r\n      ignoreQueryPrefix: true,\r\n    });\r\n\r\n    loadHandler(true);\r\n    const url =\r\n      \"https://cors-anywhere.herokuapp.com/https://sit-eli.myequity.id/customers/validateKey\";\r\n    const data = {\r\n      uniqueActivationKey: query.token,\r\n    };\r\n\r\n    axios\r\n      .post(url, data, \"\")\r\n      .then((i) => {\r\n        console.log(i);\r\n        const res = i.data.data;\r\n        console.log(res.registrationCode);\r\n        const resCustomer = res.customer;\r\n\r\n        changeHandler(\"customer_code\", resCustomer.customerCode);\r\n        changeHandler(\"customer_name\", resCustomer.customerName);\r\n        changeHandler(\"customer_status\", resCustomer.customerStatus);\r\n        changeHandler(\"username\", resCustomer.emailAddress);\r\n        changeHandler(\"registration_code\", res.registrationCode);\r\n\r\n        loadHandler(false);\r\n      })\r\n      .catch(function (error) {\r\n        changeHandler(\r\n          \"form_status\",\r\n          \"Mohon maaf koneksi mengalami kendala, silahkan coba lagi\"\r\n        );\r\n        console.log(error);\r\n        changeHandler(\"is_valid\", false);\r\n        loadHandler(false);\r\n      });\r\n  }\r\n\r\n  validation = (param) => {\r\n    const simedisAccount = this.props.states.simedis_account;\r\n    const updateFormStatus = this.props.simedisAccountChange;\r\n\r\n    if (\r\n      simedisAccount.username === \"\" ||\r\n      simedisAccount.password === \"\" ||\r\n      simedisAccount.password_retype === \"\"\r\n    ) {\r\n      updateFormStatus(\"form_status\", \"Form harus diisi semua\");\r\n      return false;\r\n    } else {\r\n      updateFormStatus(\"form_status\", \"ok\");\r\n      return true;\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { states, simedisAccountChange } = this.props;\r\n    console.log(this.props);\r\n\r\n    let card;\r\n\r\n    if (!states || states.is_loading === true) {\r\n      card = <Loader />;\r\n    } else if (states.simedis_account.active === true) {\r\n      card = <ActivationSuccess handler={simedisAccountChange} />;\r\n    } else {\r\n      card = (\r\n        <Card className=\"activation-card\">\r\n          <span className=\"activation-tagline\">\r\n            Buat kata sandi untuk akses layanan{\" \"}\r\n            <span className=\"activation-bold-simedis\">Simedis</span>\r\n          </span>\r\n          <ActivationInputs\r\n            data={states}\r\n            changeHandler={simedisAccountChange}\r\n            validation={this.validation}\r\n          />\r\n          <ContinueBtn\r\n            data={this.props}\r\n            targetURL=\"/activation\"\r\n            valid={states.simedis_account.is_valid}\r\n            label=\"Aktivasi\"\r\n          />\r\n        </Card>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"main-activation\">\r\n        <Container className=\"activation-container-0\" fluid>\r\n          <Row>\r\n            <Col>{card}</Col>\r\n          </Row>\r\n        </Container>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ActivationPage;\r\n"]},"metadata":{},"sourceType":"module"}